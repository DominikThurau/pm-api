const projects = [
  {
    id: 951,
    description: null,
    name: "PM-API",
    name_with_namespace: "Dominik Thurau / PM-API",
    path: "pm-api",
    path_with_namespace: "dominik.thurau/pm-api",
    created_at: "2022-09-06T15:47:31.560+02:00",
    default_branch: "main",
    tag_list: [],
    topics: [],
    ssh_url_to_repo: "git@gitlab.ueberbit.de:dominik.thurau/pm-api.git",
    http_url_to_repo: "https://gitlab.ueberbit.de/dominik.thurau/pm-api.git",
    web_url: "https://gitlab.ueberbit.de/dominik.thurau/pm-api",
    readme_url:
      "https://gitlab.ueberbit.de/dominik.thurau/pm-api/-/blob/main/README.md",
    avatar_url: null,
    forks_count: 0,
    star_count: 0,
    last_activity_at: "2022-11-21T15:42:39.737+01:00",
    namespace: {
      id: 293,
      name: "Dominik Thurau",
      path: "dominik.thurau",
      kind: "user",
      full_path: "dominik.thurau",
      parent_id: null,
      avatar_url: "/uploads/-/system/user/avatar/146/avatar.png",
      web_url: "https://gitlab.ueberbit.de/dominik.thurau",
    },
    container_registry_image_prefix:
      "registry.gitlab.ueberbit.de/dominik.thurau/pm-api",
    _links: {
      self: "https://gitlab.ueberbit.de/api/v4/projects/951",
      issues: "https://gitlab.ueberbit.de/api/v4/projects/951/issues",
      merge_requests:
        "https://gitlab.ueberbit.de/api/v4/projects/951/merge_requests",
      repo_branches:
        "https://gitlab.ueberbit.de/api/v4/projects/951/repository/branches",
      labels: "https://gitlab.ueberbit.de/api/v4/projects/951/labels",
      events: "https://gitlab.ueberbit.de/api/v4/projects/951/events",
      members: "https://gitlab.ueberbit.de/api/v4/projects/951/members",
      cluster_agents:
        "https://gitlab.ueberbit.de/api/v4/projects/951/cluster_agents",
    },
    packages_enabled: true,
    empty_repo: false,
    archived: false,
    visibility: "private",
    owner: {
      id: 146,
      username: "dominik.thurau",
      name: "Dominik Thurau",
      state: "active",
      avatar_url:
        "https://gitlab.ueberbit.de/uploads/-/system/user/avatar/146/avatar.png",
      web_url: "https://gitlab.ueberbit.de/dominik.thurau",
    },
    resolve_outdated_diff_discussions: false,
    container_expiration_policy: {
      cadence: "1d",
      enabled: false,
      keep_n: 10,
      older_than: "90d",
      name_regex: ".*",
      name_regex_keep: null,
      next_run_at: "2022-09-07T15:47:31.647+02:00",
    },
    issues_enabled: true,
    merge_requests_enabled: true,
    wiki_enabled: true,
    jobs_enabled: true,
    snippets_enabled: true,
    container_registry_enabled: true,
    service_desk_enabled: true,
    service_desk_address:
      "incoming-dominik-thurau-pm-api-951-issue-@servicedesk.ueberbit.de",
    can_create_merge_request_in: true,
    issues_access_level: "enabled",
    repository_access_level: "enabled",
    merge_requests_access_level: "enabled",
    forking_access_level: "enabled",
    wiki_access_level: "enabled",
    builds_access_level: "enabled",
    snippets_access_level: "enabled",
    pages_access_level: "private",
    operations_access_level: "enabled",
    analytics_access_level: "enabled",
    container_registry_access_level: "enabled",
    security_and_compliance_access_level: "private",
    releases_access_level: "enabled",
    emails_disabled: null,
    shared_runners_enabled: true,
    lfs_enabled: true,
    creator_id: 146,
    import_url: null,
    import_type: null,
    import_status: "none",
    import_error: null,
    open_issues_count: 0,
    runners_token: "GR1348941jKwYykFLtoS-9-fZAYiJ",
    ci_default_git_depth: 20,
    ci_forward_deployment_enabled: true,
    ci_job_token_scope_enabled: false,
    ci_separated_caches: true,
    ci_opt_in_jwt: false,
    ci_allow_fork_pipelines_to_run_in_parent_project: true,
    public_jobs: true,
    build_git_strategy: "fetch",
    build_timeout: 3600,
    auto_cancel_pending_pipelines: "enabled",
    ci_config_path: "",
    shared_with_groups: [],
    only_allow_merge_if_pipeline_succeeds: false,
    allow_merge_on_skipped_pipeline: null,
    restrict_user_defined_variables: false,
    request_access_enabled: true,
    only_allow_merge_if_all_discussions_are_resolved: false,
    remove_source_branch_after_merge: true,
    printing_merge_request_link_enabled: true,
    merge_method: "merge",
    squash_option: "default_off",
    enforce_auth_checks_on_uploads: true,
    suggestion_commit_message: null,
    merge_commit_template: null,
    squash_commit_template: null,
    auto_devops_enabled: false,
    auto_devops_deploy_strategy: "continuous",
    autoclose_referenced_issues: true,
    keep_latest_artifact: false,
    runner_token_expiration_interval: null,
    approvals_before_merge: 0,
    mirror: false,
    external_authorization_classification_label: null,
    marked_for_deletion_at: null,
    members: [
      {
        id: 146,
        username: "dominik.thurau",
        name: "Dominik Thurau",
        state: "active",
        avatar_url:
          "https://gitlab.ueberbit.de/uploads/-/system/user/avatar/146/avatar.png",
        web_url: "https://gitlab.ueberbit.de/dominik.thurau",
        access_level: 50,
        created_at: "2022-09-06T15:47:32.243+02:00",
        created_by: {
          id: 146,
          username: "dominik.thurau",
          name: "Dominik Thurau",
          state: "active",
          avatar_url:
            "https://gitlab.ueberbit.de/uploads/-/system/user/avatar/146/avatar.png",
          web_url: "https://gitlab.ueberbit.de/dominik.thurau",
        },
        expires_at: null,
        membership_state: "active",
      },
    ],
    marked_for_deletion_on: null,
    requirements_enabled: false,
    requirements_access_level: "enabled",
    security_and_compliance_enabled: true,
    compliance_frameworks: [],
    issues_template: null,
    merge_requests_template: null,
    merge_pipelines_enabled: false,
    merge_trains_enabled: false,
    permissions: {
      project_access: {
        access_level: 50,
        notification_level: 3,
      },
      group_access: null,
    },
  },
];

//Register Endpoints
export function registerGitLabMock(app) {
  app.get("/api/mocks/gitlab/projects", (req, res) => {
    res.send(projects);
  });

  //Get a single project
  app.get("/api/mocks/gitlab/projects/:projectID", (req, res) => {
    try {
      console.log(req.params.projectID);
      const project = projects.filter(
        (project) => project.id == req.params.projectID
      )[0];
      console.log(req.params.projectID);
      if (project) {
        res.send(project);
      } else {
        res.status(404).send("project not found");
      }
      res.send(project);
    } catch (error) {
      res.status(500).send(error);
    }
  });

  //Members
  app.get("/api/mocks/gitlab/projects/:projectID/members", (req, res) => {
    try {
      if (req.header("PRIVATE-TOKEN") == "1234567890") {
        //console.log("Token", personalAccessToken);
        const project = projects.filter(
          (project) => project.id == req.params.projectID
        )[0];
        if (project) {
          res.send(project.members);
        } else {
          res.status(404).send("project not found");
        }
      } else {
        res.status(401).send("Unauthorized");
      }
    } catch (error) {
      res.status(500).send(error);
    }
  });
}
